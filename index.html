<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>TOEIC600ブートキャンプ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="app">

    <!-- ====================== ホーム画面 ====================== -->
    <section id="screen-home" class="screen active">
      <h1 class="app-title">TOEIC600ブートキャンプ</h1>
      <p class="app-sub">単語・文法・発音・AIチャットで600点突破を目指そう</p>

      <div class="card">
        <p>今日のメニュー：</p>
        <p><strong>単語クイズ → 文法クイズ → 発音トレーニング → AIチャット＆AI英会話</strong></p>

        <div class="progress-wrap">
          <div class="progress-label">単語クイズの進捗</div>
          <div class="progress-bar">
            <div id="progress-inner" class="progress-inner"></div>
          </div>
          <div id="progress-text" class="progress-text">0 / 20</div>
        </div>
      </div>

      <button id="btn-start" class="btn primary">単語クイズを始める</button>
      <button id="btn-review" class="btn secondary" disabled>復習モード（単語）</button>
      <button id="btn-grammar" class="btn secondary">文法クイズ（穴埋め）</button>
      <button id="btn-grammar-review" class="btn secondary" disabled>文法復習モード</button>
      <button id="btn-pronunciation" class="btn secondary">発音トレーニング</button>
      <button id="btn-chat" class="btn secondary">AI英語チャット</button>
      <button id="btn-talk" class="btn secondary">AI英会話（Onitama）</button>
    </section>


    <!-- ====================== 単語クイズ ====================== -->
    <section id="screen-quiz" class="screen">
      <div class="top-bar">
        <span id="quiz-counter">1 / 20</span>
        <span id="quiz-mode-label">本番モード</span>
      </div>

      <div class="card">
        <p class="direction">英単語の意味を選んでください。</p>
        <p id="quiz-question" class="question-word">word</p>

        <div id="choices" class="choices"></div>
        <p id="feedback" class="feedback"></p>
      </div>

      <button id="btn-next" class="btn primary" style="display:none;">次へ</button>
      <button id="btn-quit" class="btn text-btn">ホームに戻る</button>
    </section>


    <!-- ====================== 結果画面 ====================== -->
    <section id="screen-result" class="screen">
      <h2 class="result-title">クイズ結果</h2>

      <div class="card">
        <p id="result-score" class="result-score">正解数 0 / 20</p>
        <p id="result-rate" class="result-rate">正答率 0%</p>
        <p id="result-rank" class="result-rank">ランク C</p>
      </div>

      <div class="card" id="result-mistakes-box">
        <p class="result-subtitle">要復習問題</p>
        <ul id="mistake-list" class="word-list"></ul>
      </div>

      <button id="btn-again" class="btn primary">もう一度 解く</button>
      <button id="btn-go-review" class="btn secondary" disabled>復習モードで解き直す</button>
      <button id="btn-back-home" class="btn text-btn">ホームへ</button>
    </section>


    <!-- ====================== 文法クイズ ====================== -->
    <section id="screen-grammar" class="screen">
      <div class="top-bar">
        <span id="grammar-mode-label">文法クイズ（例文穴埋め）</span>
        <span id="grammar-counter">1 / 10</span>
      </div>

      <div class="card">
        <p class="direction">文中の (_____) に入る最も適切な語を選んでください。</p>
        <p id="grammar-question" class="question-sentence">
          She (_____) the report yesterday.
        </p>

        <div id="grammar-choices" class="choices"></div>
        <p id="grammar-feedback" class="feedback"></p>
        <p id="grammar-progress" class="grammar-progress">正解数 0 / 0</p>
      </div>

      <button id="btn-grammar-next" class="btn primary" style="display:none;">次の問題へ</button>
      <button id="btn-grammar-back" class="btn text-btn">ホームに戻る</button>
    </section>


    <!-- ====================== 発音トレーニング ====================== -->
    <section id="screen-pronunciation" class="screen">
      <div class="top-bar">
        <span>発音トレーニング</span>
      </div>

      <div class="card">
        <p class="direction">
          「🎙 マイクで話す」を押してから、英語で話してみてください。<br>
          話し終わったら「■ 停止（チェック）」を押すと、AIコーチが文法と表現をフィードバックします。
        </p>
        <p class="small-note">
          例：自己紹介、今日の出来事、仕事の内容 など自由にOK。
        </p>
      </div>

      <div class="card">
        <p class="shadow-label">認識された英語</p>
        <p id="pron-text" class="recognized-text">まだ何も話していません。</p>
      </div>

      <div class="card">
        <p class="shadow-label">AIコーチのフィードバック</p>
        <p id="pron-feedback" class="recognized-text">ここにアドバイスが表示されます。</p>
      </div>

      <div class="shadow-controls">
        <button id="btn-pron-start" class="btn primary">🎙 マイクで話す</button>
        <button id="btn-pron-stop" class="btn secondary">■ 停止（チェック）</button>
        <button id="btn-pron-back" class="btn text-btn">ホームに戻る</button>
      </div>
    </section>


    <!-- ====================== AI英語チャット ====================== -->
    <section id="screen-chat" class="screen">
      <div class="top-bar">
        <span>AI英語チャット</span>
        <span class="chat-subtitle">英語なんでも相談</span>
      </div>

      <div class="card chat-card">
        <div id="chat-log" class="chat-log"></div>
      </div>

      <div class="chat-quick">
        <button id="btn-chat-example" class="btn secondary">今日の単語で例文を作って</button>
        <button id="btn-chat-sales" class="btn secondary">営業のシーンで使える表現を教えて</button>
      </div>

      <div class="chat-input-row">
        <input id="chat-input" class="chat-input" type="text"
               placeholder="例）increase を使ってビジネスの例文を作って" />
        <button id="btn-chat-send" class="btn primary chat-send-btn">送信</button>
      </div>

      <button id="btn-chat-back" class="btn text-btn">ホームに戻る</button>
    </section>


    <!-- ====================== AI英会話（Onitama：音声会話） ====================== -->
    <section id="screen-talk" class="screen">
      <div class="top-bar">
        <span>AI英会話（Onitama）</span>
        <span class="chat-subtitle">おにぎりくんと英語でおしゃべり</span>
      </div>

      <div class="card talk-header">
        <div class="char-avatar">
          <div class="char-face">🍙</div>
        </div>
        <div class="talk-intro">
          <p class="direction">
            マイクをオンにして英語で話すと、Onigiri-kun が英語で返事をしてくれます。<br>
            文法が少し間違っていても、意味をくみ取って会話を続ける「英会話練習専用モード」です。
          </p>
          <p class="small-note">
            例：Where are you from? / Can we practice self-introduction? など。
          </p>
        </div>
      </div>

      <div class="card chat-card">
        <div id="talk-log" class="chat-log"></div>
      </div>

      <div class="card">
        <p class="shadow-label">認識中の英語</p>
        <p id="talk-heard" class="recognized-text">
          「🎙 マイクで話す」を押してから、英語で話してみてください。
        </p>
        <p id="talk-status" class="small-note">ステータス：待機中</p>
      </div>

      <div class="shadow-controls">
        <button id="btn-talk-start" class="btn primary">🎙 マイクで話す</button>
        <button id="btn-talk-stop" class="btn secondary">■ 停止して Onigiri-kun に送る</button>
        <button id="btn-talk-back" class="btn text-btn">ホームに戻る</button>
      </div>
    </section>

  </div>

  <!-- ====================== 効果音 ====================== -->
  <audio id="se-correct" src="sounds/correct.wav"></audio>
  <audio id="se-next"    src="sounds/next.wav"></audio>
  <audio id="se-wrong"   src="sounds/wrong.wav"></audio>
  <audio id="se-click"   src="sounds/click.wav"></audio>

  <script src="script.js"></script>
</body>
</html>
